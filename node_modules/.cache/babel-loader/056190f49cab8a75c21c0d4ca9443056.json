{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Lillyt/Desktop/GIT/Clash-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Lillyt/Desktop/GIT/Clash-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Lillyt/Desktop/GIT/Clash-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import DropDown from\"../UI/DropDown\";import ErrorModal from\"../UI/ErrorModal\";import classes from\"./SearchForm.module.css\";import{IconContext}from\"react-icons\";import{BiSearchAlt}from\"react-icons/bi\";import RetrieveData from\"./RetrieveData\";//need to make the data sender in a statet (maybe state is searched data)\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SearchForm=function SearchForm(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),summonerName=_useState2[0],setSummonerName=_useState2[1];var _useState3=useState(\"DEFAULT\"),_useState4=_slicedToArray(_useState3,2),selectedRegion=_useState4[0],setRegion=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var saveRegionDataHandler=function saveRegionDataHandler(data){setRegion(data);};var summonerNameChangeHandler=function summonerNameChangeHandler(event){setSummonerName(event.target.value);};var searchSubmitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var save;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();console.log(\"button pressed\");//put data into the api\n_context.next=4;return RetrieveData(summonerName,selectedRegion).catch(function(error){return error;});case 4:save=_context.sent;if(save instanceof Error){if(save.message===\"Failed to fetch\"){setError({title:\"Invalid Summoner\",message:\"Please enter a valid summoner name\"});}if(save.message===\"Cannot read properties of undefined (reading 'teamId')\"){setError({title:\"Invalid Team\",message:\"No clash team exists for this summoner.\"});}}else{props.onSearch(save);}setSummonerName(\"\");setRegion(\"DEFAULT\");case 8:case\"end\":return _context.stop();}}},_callee);}));return function searchSubmitHandler(_x){return _ref.apply(this,arguments);};}();var errorChangeHandler=function errorChangeHandler(props){setError(\"\");};return/*#__PURE__*/_jsxs(_Fragment,{children:[error&&/*#__PURE__*/_jsx(ErrorModal,{title:error.title,message:error.message,onClick:errorChangeHandler}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:searchSubmitHandler,className:classes.searchBar,children:[/*#__PURE__*/_jsx(DropDown,{onSaveRegionData:saveRegionDataHandler,selectedRegion:selectedRegion}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"User\"}),/*#__PURE__*/_jsx(\"input\",{id:\"user\",type:\"text\",placeholder:\"Enter a summoner name\",value:summonerName,onChange:summonerNameChangeHandler}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:/*#__PURE__*/_jsx(IconContext.Provider,{value:{color:\"white\",size:\"30px\"},children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(BiSearchAlt,{})})})})]})]});};export default SearchForm;","map":{"version":3,"names":["React","useState","DropDown","ErrorModal","classes","IconContext","BiSearchAlt","RetrieveData","SearchForm","props","summonerName","setSummonerName","selectedRegion","setRegion","error","setError","saveRegionDataHandler","data","summonerNameChangeHandler","event","target","value","searchSubmitHandler","preventDefault","console","log","catch","save","Error","message","title","onSearch","errorChangeHandler","searchBar","color","size"],"sources":["C:/Users/Lillyt/Desktop/GIT/Clash-app/src/Components/Search/SearchForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport DropDown from \"../UI/DropDown\";\r\nimport ErrorModal from \"../UI/ErrorModal\";\r\nimport classes from \"./SearchForm.module.css\";\r\nimport { IconContext } from \"react-icons\";\r\nimport { BiSearchAlt } from \"react-icons/bi\";\r\nimport RetrieveData from \"./RetrieveData\";\r\n\r\n//need to make the data sender in a statet (maybe state is searched data)\r\n\r\n\r\nconst SearchForm = (props) => {\r\n  const [summonerName, setSummonerName] = useState(\"\");\r\n  const [selectedRegion, setRegion] = useState(\"DEFAULT\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n\r\n  const saveRegionDataHandler = (data) => {\r\n    setRegion(data);\r\n  };\r\n\r\n  const summonerNameChangeHandler = (event) => {\r\n    setSummonerName(event.target.value);\r\n  };\r\n\r\n  const searchSubmitHandler = async (event) => {\r\n    event.preventDefault();\r\n    console.log(\"button pressed\");\r\n    //put data into the api\r\n    \r\n    let save = await RetrieveData(summonerName, selectedRegion).catch(error => error)\r\n    if (save instanceof Error) {\r\n      if (save.message === \"Failed to fetch\") {\r\n        setError({title: \"Invalid Summoner\", message:\"Please enter a valid summoner name\"})\r\n      }\r\n      if (save.message === \"Cannot read properties of undefined (reading 'teamId')\") {\r\n        setError({title:\"Invalid Team\", message:\"No clash team exists for this summoner.\"})\r\n      }\r\n    }\r\n    else {\r\n      props.onSearch(save);\r\n    }\r\n    setSummonerName(\"\");\r\n    setRegion(\"DEFAULT\");\r\n  };\r\n\r\n\r\n\r\n\r\n  const errorChangeHandler = (props) => {\r\n    setError(\"\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n    {error && (\r\n      <ErrorModal title={error.title} message={error.message} onClick={errorChangeHandler} />\r\n    )}\r\n        <form onSubmit={searchSubmitHandler} className={classes.searchBar}>\r\n          <DropDown onSaveRegionData={saveRegionDataHandler} selectedRegion={selectedRegion}/>\r\n          <label htmlFor=\"User\" />\r\n          <input\r\n            id=\"user\"\r\n            type=\"text\"\r\n            placeholder=\"Enter a summoner name\"\r\n            value={summonerName}\r\n            onChange={summonerNameChangeHandler}\r\n          />\r\n          <button type=\"submit\">\r\n            <IconContext.Provider value={{ color: \"white\", size: \"30px\" }}>\r\n              <div>\r\n                <BiSearchAlt />\r\n              </div>\r\n            </IconContext.Provider>\r\n          </button>\r\n        </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SearchForm;\r\n"],"mappings":"iYAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,SAAP,KAAqB,gBAArB,CACA,MAAOC,WAAP,KAAuB,kBAAvB,CACA,MAAOC,QAAP,KAAoB,yBAApB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,WAAT,KAA4B,gBAA5B,CACA,MAAOC,aAAP,KAAyB,gBAAzB,CAEA;6IAGA,GAAMC,WAAU,CAAG,QAAbA,WAAa,CAACC,KAAD,CAAW,CAC5B,cAAwCR,QAAQ,CAAC,EAAD,CAAhD,wCAAOS,YAAP,eAAqBC,eAArB,eACA,eAAoCV,QAAQ,CAAC,SAAD,CAA5C,yCAAOW,cAAP,eAAuBC,SAAvB,eACA,eAA0BZ,QAAQ,CAAC,EAAD,CAAlC,yCAAOa,KAAP,eAAcC,QAAd,eAGA,GAAMC,sBAAqB,CAAG,QAAxBA,sBAAwB,CAACC,IAAD,CAAU,CACtCJ,SAAS,CAACI,IAAD,CAAT,CACD,CAFD,CAIA,GAAMC,0BAAyB,CAAG,QAA5BA,0BAA4B,CAACC,KAAD,CAAW,CAC3CR,eAAe,CAACQ,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAf,CACD,CAFD,CAIA,GAAMC,oBAAmB,4FAAG,iBAAOH,KAAP,6HAC1BA,KAAK,CAACI,cAAN,GACAC,OAAO,CAACC,GAAR,CAAY,gBAAZ,EACA;AAH0B,sBAKTlB,aAAY,CAACG,YAAD,CAAeE,cAAf,CAAZ,CAA2Cc,KAA3C,CAAiD,SAAAZ,KAAK,QAAIA,MAAJ,EAAtD,CALS,QAKtBa,IALsB,eAM1B,GAAIA,IAAI,WAAYC,MAApB,CAA2B,CACzB,GAAID,IAAI,CAACE,OAAL,GAAiB,iBAArB,CAAwC,CACtCd,QAAQ,CAAC,CAACe,KAAK,CAAE,kBAAR,CAA4BD,OAAO,CAAC,oCAApC,CAAD,CAAR,CACD,CACD,GAAIF,IAAI,CAACE,OAAL,GAAiB,wDAArB,CAA+E,CAC7Ed,QAAQ,CAAC,CAACe,KAAK,CAAC,cAAP,CAAuBD,OAAO,CAAC,yCAA/B,CAAD,CAAR,CACD,CACF,CAPD,IAQK,CACHpB,KAAK,CAACsB,QAAN,CAAeJ,IAAf,EACD,CACDhB,eAAe,CAAC,EAAD,CAAf,CACAE,SAAS,CAAC,SAAD,CAAT,CAlB0B,sDAAH,kBAAnBS,oBAAmB,4CAAzB,CAwBA,GAAMU,mBAAkB,CAAG,QAArBA,mBAAqB,CAACvB,KAAD,CAAW,CACpCM,QAAQ,CAAC,EAAD,CAAR,CACD,CAFD,CAIA,mBACE,2BACCD,KAAK,eACJ,KAAC,UAAD,EAAY,KAAK,CAAEA,KAAK,CAACgB,KAAzB,CAAgC,OAAO,CAAEhB,KAAK,CAACe,OAA/C,CAAwD,OAAO,CAAEG,kBAAjE,EAFF,cAII,cAAM,QAAQ,CAAEV,mBAAhB,CAAqC,SAAS,CAAElB,OAAO,CAAC6B,SAAxD,wBACE,KAAC,QAAD,EAAU,gBAAgB,CAAEjB,qBAA5B,CAAmD,cAAc,CAAEJ,cAAnE,EADF,cAEE,cAAO,OAAO,CAAC,MAAf,EAFF,cAGE,cACE,EAAE,CAAC,MADL,CAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,uBAHd,CAIE,KAAK,CAAEF,YAJT,CAKE,QAAQ,CAAEQ,yBALZ,EAHF,cAUE,eAAQ,IAAI,CAAC,QAAb,uBACE,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAAEgB,KAAK,CAAE,OAAT,CAAkBC,IAAI,CAAE,MAAxB,CAA7B,uBACE,kCACE,KAAC,WAAD,IADF,EADF,EADF,EAVF,GAJJ,GADF,CAyBD,CAnED,CAqEA,cAAe3B,WAAf"},"metadata":{},"sourceType":"module"}